"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@fuel-ts+contract@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6._0bbd028485ce7a57cb1e5340b17ff500";
exports.ids = ["vendor-chunks/@fuel-ts+contract@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6._0bbd028485ce7a57cb1e5340b17ff500"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@fuel-ts+contract@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6._0bbd028485ce7a57cb1e5340b17ff500/node_modules/@fuel-ts/contract/dist/index.mjs":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@fuel-ts+contract@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6._0bbd028485ce7a57cb1e5340b17ff500/node_modules/@fuel-ts/contract/dist/index.mjs ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("var _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContractFactory: () => (/* binding */ ContractFactory),\n/* harmony export */   getContractId: () => (/* binding */ getContractId),\n/* harmony export */   getContractRoot: () => (/* binding */ getContractRoot),\n/* harmony export */   getContractStorageRoot: () => (/* binding */ getContractStorageRoot),\n/* harmony export */   hexlifyWithPrefix: () => (/* binding */ hexlifyWithPrefix)\n/* harmony export */ });\n/* harmony import */ var _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @fuel-ts/abi-coder */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+abi-coder@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6_6403986254e63357a3dfff475209c93d/node_modules/@fuel-ts/abi-coder/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @fuel-ts/account */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+account@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1_f204daa1b5bd0d8f80ab398db79a8f51/node_modules/@fuel-ts/account/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @fuel-ts/crypto */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+crypto@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1__2af6281b4693138068177942c72da7d9/node_modules/@fuel-ts/crypto/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @fuel-ts/errors */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+errors@0.101.1/node_modules/@fuel-ts/errors/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_hasher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @fuel-ts/hasher */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+hasher@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1__3de5373ec566d2f8672f34c376d1b1fa/node_modules/@fuel-ts/hasher/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_math__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @fuel-ts/math */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+math@0.101.1/node_modules/@fuel-ts/math/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_program__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @fuel-ts/program */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+program@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1_6e753f1b81b88d2c391508fb79ab08d1/node_modules/@fuel-ts/program/dist/index.mjs\");\n/* harmony import */ var _fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @fuel-ts/utils */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+utils@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1_j_f5ff000e110be614030afd6e0fd99f41/node_modules/@fuel-ts/utils/dist/index.mjs\");\n/* harmony import */ var _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @fuels/vm-asm */ \"(ssr)/./node_modules/.pnpm/@fuels+vm-asm@0.60.2/node_modules/@fuels/vm-asm/dist/node/index.cjs\");\n/* harmony import */ var _fuel_ts_merkle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @fuel-ts/merkle */ \"(ssr)/./node_modules/.pnpm/@fuel-ts+merkle@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6.1__de9684f3895abff2485b47f5d673b5af/node_modules/@fuel-ts/merkle/dist/index.mjs\");\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\n\n// src/contract-factory.ts\n\n\n\n\n\n\n\n\n\n// src/loader/loader-script.ts\n\n\n\n\nvar getLoaderInstructions = /* @__PURE__ */ __name((blobIds) => {\n  const { RegId, Instruction } = /*#__PURE__*/ (_fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8___namespace_cache || (_fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8___namespace_cache = __webpack_require__.t(_fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__, 2)));\n  const numberOfInstructions = 12;\n  const numberOfBlobs = blobIds.length;\n  const blobIdSize = _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.BYTES_32;\n  const blobIdBytes = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.concat)(blobIds.map((b) => (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(b)));\n  const instructionBytes = new _fuel_ts_program__WEBPACK_IMPORTED_MODULE_6__.InstructionSet(\n    // 1. load the blob contents into memory\n    // find the start of the hardcoded blob ids, which are located after the code ends\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.move_(16, RegId.pc().to_u8()),\n    // 0x10 to hold the address of the current blob id\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.addi(16, 16, numberOfInstructions * Instruction.size()),\n    // The contract is going to be loaded from the current value of SP onwards, save\n    // the location into 0x16 so we can jump into it later on\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.move_(22, RegId.sp().to_u8()),\n    // loop counter\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.movi(19, numberOfBlobs),\n    // LOOP starts here\n    // 0x11 to hold the size of the current blob\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.bsiz(17, 16),\n    // push the blob contents onto the stack\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.ldc(16, 0, 17, 1),\n    // move on to the next blob\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.addi(16, 16, blobIdSize),\n    // decrement the loop counter\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.subi(19, 19, 1),\n    // Jump backwards (3+1) instructions if the counter has not reached 0\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.jnzb(19, RegId.zero().to_u8(), 3),\n    // Jump into the memory where the contract is loaded\n    // what follows is called _jmp_mem by the sway compiler\n    // subtract the address contained in IS because jmp will add it back\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.sub(22, 22, RegId.is().to_u8()),\n    // jmp will multiply by 4 so we need to divide to cancel that out\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.divi(22, 22, 4),\n    // jump to the start of the contract we loaded\n    _fuels_vm_asm__WEBPACK_IMPORTED_MODULE_8__.jmp(22)\n  ).toBytes();\n  return (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.concat)([instructionBytes, blobIdBytes]);\n}, \"getLoaderInstructions\");\n\n// src/loader/utils.ts\n\n\nvar getContractChunks = /* @__PURE__ */ __name((bytecode, chunkSize) => {\n  const chunks = [];\n  for (let offset = 0, index = 0; offset < bytecode.length; offset += chunkSize, index++) {\n    let chunk = bytecode.slice(offset, offset + chunkSize);\n    let length = chunk.length;\n    if (length % _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.WORD_SIZE !== 0) {\n      chunk = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.concat)([chunk, new Uint8Array(chunkSize - chunk.length)]);\n      length = chunk.length;\n    }\n    chunks.push({ id: index, size: length, bytecode: chunk });\n  }\n  return chunks;\n}, \"getContractChunks\");\n\n// src/util.ts\n\n\n\nvar getContractRoot = /* @__PURE__ */ __name((bytecode) => {\n  const chunkSize = 16 * 1024;\n  const bytes = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(bytecode);\n  const chunks = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.chunkAndPadBytes)(bytes, chunkSize);\n  return (0,_fuel_ts_merkle__WEBPACK_IMPORTED_MODULE_9__.calcRoot)(chunks.map((c) => (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.hexlify)(c)));\n}, \"getContractRoot\");\nvar getContractStorageRoot = /* @__PURE__ */ __name((storageSlots) => {\n  const tree = new _fuel_ts_merkle__WEBPACK_IMPORTED_MODULE_9__.SparseMerkleTree();\n  storageSlots.forEach(({ key, value }) => tree.update((0,_fuel_ts_hasher__WEBPACK_IMPORTED_MODULE_4__.sha256)(key), value));\n  return tree.root;\n}, \"getContractStorageRoot\");\nvar getContractId = /* @__PURE__ */ __name((bytecode, salt, stateRoot) => {\n  const root = getContractRoot((0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(bytecode));\n  const contractId = (0,_fuel_ts_hasher__WEBPACK_IMPORTED_MODULE_4__.sha256)((0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.concat)([\"0x4655454C\", salt, root, stateRoot]));\n  return contractId;\n}, \"getContractId\");\nvar hexlifyWithPrefix = /* @__PURE__ */ __name((value) => (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.hexlify)(value.startsWith(\"0x\") ? value : `0x${value}`), \"hexlifyWithPrefix\");\n\n// src/contract-factory.ts\nvar CHUNK_SIZE_MULTIPLIER = 0.95;\nvar ContractFactory = class _ContractFactory {\n  static {\n    __name(this, \"ContractFactory\");\n  }\n  bytecode;\n  interface;\n  provider;\n  account;\n  storageSlots;\n  /**\n   * Create a ContractFactory instance.\n   *\n   * @param bytecode - The bytecode of the contract.\n   * @param abi - The contract's ABI (Application Binary Interface).\n   * @param accountOrProvider - An account or provider to be associated with the factory.\n   */\n  constructor(bytecode, abi, accountOrProvider = null, storageSlots = []) {\n    this.bytecode = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(bytecode);\n    if (abi instanceof _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.Interface) {\n      this.interface = abi;\n    } else {\n      this.interface = new _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.Interface(abi);\n    }\n    if (accountOrProvider && \"provider\" in accountOrProvider) {\n      this.provider = accountOrProvider.provider;\n      this.account = accountOrProvider;\n    } else {\n      this.provider = accountOrProvider;\n      this.account = null;\n    }\n    this.storageSlots = storageSlots;\n  }\n  /**\n   * Connect the factory to a provider.\n   *\n   * @param provider - The provider to be associated with the factory.\n   * @returns A new ContractFactory instance.\n   */\n  connect(provider) {\n    return new _ContractFactory(this.bytecode, this.interface, provider);\n  }\n  /**\n   * Create a transaction request to deploy a contract with the specified options.\n   *\n   * @param deployOptions - Options for deploying the contract.\n   * @returns The CreateTransactionRequest object for deploying the contract.\n   */\n  createTransactionRequest(deployOptions) {\n    const storageSlots = (deployOptions?.storageSlots ?? []).concat(this.storageSlots).map(({ key, value }) => ({\n      key: hexlifyWithPrefix(key),\n      value: hexlifyWithPrefix(value)\n    })).filter((el, index, self) => self.findIndex((s) => s.key === el.key) === index).sort(({ key: keyA }, { key: keyB }) => keyA.localeCompare(keyB));\n    const options = {\n      salt: (0,_fuel_ts_crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32),\n      ...deployOptions ?? {},\n      storageSlots\n    };\n    if (!this.provider) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n        _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.MISSING_PROVIDER,\n        \"Cannot create transaction request without provider\"\n      );\n    }\n    const bytecode = deployOptions?.bytecode || this.bytecode;\n    const stateRoot = options.stateRoot || getContractStorageRoot(options.storageSlots);\n    const contractId = getContractId(bytecode, options.salt, stateRoot);\n    const transactionRequest = new _fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.CreateTransactionRequest({\n      bytecodeWitnessIndex: 0,\n      witnesses: [bytecode],\n      ...options\n    });\n    transactionRequest.addContractCreatedOutput(contractId, stateRoot);\n    return {\n      contractId,\n      transactionRequest\n    };\n  }\n  /**\n   * Takes a transaction request, estimates it and funds it.\n   *\n   * @param request - the request to fund.\n   * @param options - options for funding the request.\n   * @returns a funded transaction request.\n   */\n  async fundTransactionRequest(request, options = {}) {\n    const account = this.getAccount();\n    const { maxFee: setMaxFee } = options;\n    const txCost = await account.getTransactionCost(request);\n    if ((0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.isDefined)(setMaxFee)) {\n      if (txCost.maxFee.gt(setMaxFee)) {\n        throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n          _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.MAX_FEE_TOO_LOW,\n          `Max fee '${options.maxFee}' is lower than the required: '${txCost.maxFee}'.`\n        );\n      }\n    } else {\n      request.maxFee = txCost.maxFee;\n    }\n    await account.fund(request, txCost);\n    return request;\n  }\n  async assembleTx(request, options = {}) {\n    const account = this.getAccount();\n    const { maxFee: setMaxFee } = options;\n    request.maxFee = (0,_fuel_ts_math__WEBPACK_IMPORTED_MODULE_5__.bn)(0);\n    const { gasPrice, assembledRequest } = await account.provider.assembleTx({\n      request,\n      feePayerAccount: account,\n      accountCoinQuantities: []\n    });\n    request = await (0,_fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.setAndValidateGasAndFeeForAssembledTx)({\n      gasPrice,\n      provider: account.provider,\n      transactionRequest: assembledRequest,\n      setMaxFee\n    });\n    return request;\n  }\n  /**\n   * Deploy a contract of any length with the specified options.\n   *\n   * @param deployOptions - Options for deploying the contract.\n   * @returns A promise that resolves to the deployed contract instance.\n   */\n  async deploy(deployOptions = {}) {\n    const account = this.getAccount();\n    const { consensusParameters } = await account.provider.getChain();\n    const maxContractSize = consensusParameters.contractParameters.contractMaxSize.toNumber();\n    return this.bytecode.length > maxContractSize ? this.deployAsBlobTx(deployOptions) : this.deployAsCreateTx(deployOptions);\n  }\n  /**\n   * Deploy a contract with the specified options.\n   *\n   * @param deployOptions - Options for deploying the contract.\n   * @returns A promise that resolves to the deployed contract instance.\n   */\n  async deployAsCreateTx(deployOptions = {}) {\n    const account = this.getAccount();\n    const { consensusParameters } = await account.provider.getChain();\n    const maxContractSize = consensusParameters.contractParameters.contractMaxSize.toNumber();\n    if (this.bytecode.length > maxContractSize) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n        _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.CONTRACT_SIZE_EXCEEDS_LIMIT,\n        \"Contract bytecode is too large. Please use `deployAsBlobTx` instead.\"\n      );\n    }\n    const { contractId, transactionRequest } = await this.prepareDeploy(deployOptions);\n    const transactionResponse = await account.sendTransaction(transactionRequest);\n    const waitForResult = /* @__PURE__ */ __name(async () => {\n      const transactionResult = await transactionResponse.waitForResult();\n      const contract = new _fuel_ts_program__WEBPACK_IMPORTED_MODULE_6__.Contract(contractId, this.interface, account);\n      return { contract, transactionResult };\n    }, \"waitForResult\");\n    const waitForPreConfirmation = /* @__PURE__ */ __name(async () => {\n      const transactionResult = await transactionResponse.waitForPreConfirmation();\n      const contract = new _fuel_ts_program__WEBPACK_IMPORTED_MODULE_6__.Contract(contractId, this.interface, account);\n      return { contract, transactionResult };\n    }, \"waitForPreConfirmation\");\n    return {\n      contractId,\n      waitForResult,\n      waitForPreConfirmation,\n      waitForTransactionId: /* @__PURE__ */ __name(() => Promise.resolve(transactionResponse.id), \"waitForTransactionId\")\n    };\n  }\n  /**\n   * Chunks and deploys a contract via a loader contract. Suitable for deploying contracts larger than the max contract size.\n   *\n   * @param deployOptions - Options for deploying the contract.\n   * @returns A promise that resolves to the deployed contract instance.\n   */\n  async deployAsBlobTx(deployOptions = {\n    chunkSizeMultiplier: CHUNK_SIZE_MULTIPLIER\n  }) {\n    const account = this.getAccount();\n    const { configurableConstants, chunkSizeMultiplier } = deployOptions;\n    if (configurableConstants) {\n      this.setConfigurableConstants(configurableConstants);\n    }\n    const chunkSize = await this.getMaxChunkSize(deployOptions, chunkSizeMultiplier);\n    const chunks = getContractChunks((0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(this.bytecode), chunkSize).map((c) => {\n      const transactionRequest = this.blobTransactionRequest({\n        ...deployOptions,\n        bytecode: c.bytecode\n      });\n      return {\n        ...c,\n        transactionRequest,\n        blobId: transactionRequest.blobId\n      };\n    });\n    const blobIds = chunks.map(({ blobId }) => blobId);\n    const loaderBytecode = getLoaderInstructions(blobIds);\n    const { contractId, transactionRequest: createRequest } = this.createTransactionRequest({\n      bytecode: loaderBytecode,\n      ...deployOptions\n    });\n    const uniqueBlobIds = [...new Set(blobIds)];\n    const uploadedBlobIds = await account.provider.getBlobs(uniqueBlobIds);\n    const blobIdsToUpload = uniqueBlobIds.filter((id) => !uploadedBlobIds.includes(id));\n    let totalCost = (0,_fuel_ts_math__WEBPACK_IMPORTED_MODULE_5__.bn)(0);\n    const chainInfo = await account.provider.getChain();\n    const gasPrice = await account.provider.estimateGasPrice(10);\n    const priceFactor = chainInfo.consensusParameters.feeParameters.gasPriceFactor;\n    for (const { transactionRequest, blobId } of chunks) {\n      if (blobIdsToUpload.includes(blobId)) {\n        const minGas = transactionRequest.calculateMinGas(chainInfo);\n        const minFee = (0,_fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.calculateGasFee)({\n          gasPrice,\n          gas: minGas,\n          priceFactor,\n          tip: transactionRequest.tip\n        }).add(1);\n        totalCost = totalCost.add(minFee);\n      }\n      const createMinGas = createRequest.calculateMinGas(chainInfo);\n      const createMinFee = (0,_fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.calculateGasFee)({\n        gasPrice,\n        gas: createMinGas,\n        priceFactor,\n        tip: createRequest.tip\n      }).add(1);\n      totalCost = totalCost.add(createMinFee);\n    }\n    if (totalCost.gt(await account.getBalance())) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(_fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.FUNDS_TOO_LOW, \"Insufficient balance to deploy contract.\");\n    }\n    let txIdResolver;\n    const txIdPromise = new Promise((resolve) => {\n      txIdResolver = resolve;\n    });\n    const waitForResult = /* @__PURE__ */ __name(async () => {\n      const uploadedBlobs = [];\n      for (const { blobId, transactionRequest } of chunks) {\n        if (!uploadedBlobs.includes(blobId) && blobIdsToUpload.includes(blobId)) {\n          const fundedBlobRequest = await this.assembleTx(transactionRequest, deployOptions);\n          let result;\n          try {\n            const blobTx = await account.sendTransaction(fundedBlobRequest);\n            result = await blobTx.waitForResult();\n          } catch (err) {\n            if (err.message.indexOf(`BlobId is already taken ${blobId}`) > -1) {\n              uploadedBlobs.push(blobId);\n              continue;\n            }\n            throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(_fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.TRANSACTION_FAILED, \"Failed to deploy contract chunk\");\n          }\n          if (!result.status || result.status !== _fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.TransactionStatus.success) {\n            throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(_fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.TRANSACTION_FAILED, \"Failed to deploy contract chunk\");\n          }\n          uploadedBlobs.push(blobId);\n        }\n      }\n      await this.assembleTx(createRequest, deployOptions);\n      txIdResolver(createRequest.getTransactionId(await account.provider.getChainId()));\n      const transactionResponse = await account.sendTransaction(createRequest);\n      const transactionResult = await transactionResponse.waitForResult();\n      const contract = new _fuel_ts_program__WEBPACK_IMPORTED_MODULE_6__.Contract(contractId, this.interface, account);\n      return { contract, transactionResult };\n    }, \"waitForResult\");\n    const waitForTransactionId = /* @__PURE__ */ __name(() => txIdPromise, \"waitForTransactionId\");\n    return { waitForResult, contractId, waitForTransactionId };\n  }\n  /**\n   * Set configurable constants of the contract with the specified values.\n   *\n   * @param configurableConstants - An object containing configurable names and their values.\n   */\n  setConfigurableConstants(configurableConstants) {\n    try {\n      const hasConfigurable = Object.keys(this.interface.configurables).length;\n      if (!hasConfigurable) {\n        throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n          _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.CONFIGURABLE_NOT_FOUND,\n          \"Contract does not have configurables to be set\"\n        );\n      }\n      Object.entries(configurableConstants).forEach(([key, value]) => {\n        if (!this.interface.configurables[key]) {\n          throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n            _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.CONFIGURABLE_NOT_FOUND,\n            `Contract does not have a configurable named: '${key}'`\n          );\n        }\n        const { offset } = this.interface.configurables[key];\n        const encoded = this.interface.encodeConfigurable(key, value);\n        const bytes = (0,_fuel_ts_utils__WEBPACK_IMPORTED_MODULE_7__.arrayify)(this.bytecode);\n        bytes.set(encoded, offset);\n        this.bytecode = bytes;\n      });\n    } catch (err) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n        _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.INVALID_CONFIGURABLE_CONSTANTS,\n        `Error setting configurable constants on contract: ${err.message}.`\n      );\n    }\n  }\n  getAccount() {\n    if (!this.account) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(_fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.ACCOUNT_REQUIRED, \"Account not assigned to contract.\");\n    }\n    return this.account;\n  }\n  async prepareDeploy(deployOptions) {\n    const { configurableConstants } = deployOptions;\n    if (configurableConstants) {\n      this.setConfigurableConstants(configurableConstants);\n    }\n    const { contractId, transactionRequest } = this.createTransactionRequest(deployOptions);\n    await this.assembleTx(transactionRequest, deployOptions);\n    return {\n      contractId,\n      transactionRequest\n    };\n  }\n  /**\n   * Create a blob transaction request, used for deploying contract chunks.\n   *\n   * @param options - options for creating a blob transaction request.\n   * @returns a populated BlobTransactionRequest.\n   */\n  blobTransactionRequest(options) {\n    const { bytecode } = options;\n    return new _fuel_ts_account__WEBPACK_IMPORTED_MODULE_1__.BlobTransactionRequest({\n      blobId: (0,_fuel_ts_hasher__WEBPACK_IMPORTED_MODULE_4__.hash)(bytecode),\n      witnessIndex: 0,\n      witnesses: [bytecode],\n      ...options\n    });\n  }\n  /**\n   * Get the maximum chunk size for deploying a contract by chunks.\n   */\n  async getMaxChunkSize(deployOptions, chunkSizeMultiplier = CHUNK_SIZE_MULTIPLIER) {\n    if (chunkSizeMultiplier < 0 || chunkSizeMultiplier > 1) {\n      throw new _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.FuelError(\n        _fuel_ts_errors__WEBPACK_IMPORTED_MODULE_3__.ErrorCode.INVALID_CHUNK_SIZE_MULTIPLIER,\n        \"Chunk size multiplier must be between 0 and 1\"\n      );\n    }\n    const account = this.getAccount();\n    const { consensusParameters } = await account.provider.getChain();\n    const contractSizeLimit = consensusParameters.contractParameters.contractMaxSize.toNumber();\n    const transactionSizeLimit = consensusParameters.txParameters.maxSize.toNumber();\n    const maxLimit = 64e3;\n    const chainLimit = transactionSizeLimit < contractSizeLimit ? transactionSizeLimit : contractSizeLimit;\n    const sizeLimit = chainLimit < maxLimit ? chainLimit : maxLimit;\n    const blobTx = this.blobTransactionRequest({\n      ...deployOptions,\n      bytecode: (0,_fuel_ts_crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(32)\n    }).addResources(\n      account.generateFakeResources([\n        { assetId: await account.provider.getBaseAssetId(), amount: (0,_fuel_ts_math__WEBPACK_IMPORTED_MODULE_5__.bn)(1) }\n      ])\n    );\n    const maxChunkSize = (sizeLimit - blobTx.byteLength() - _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.WORD_SIZE) * chunkSizeMultiplier;\n    return Math.round(maxChunkSize / _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.WORD_SIZE) * _fuel_ts_abi_coder__WEBPACK_IMPORTED_MODULE_0__.WORD_SIZE;\n  }\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGZ1ZWwtdHMrY29udHJhY3RAMC4xMDEuMV92aXRlc3RAMy4yLjRfQHR5cGVzK2RlYnVnQDQuMS4xMl9AdHlwZXMrbm9kZUAyNC43LjJfaml0aUAyLjYuXzBiYmQwMjg0ODVjZTdhNTdjYjFlNTM0MGIxN2ZmNTAwL25vZGVfbW9kdWxlcy9AZnVlbC10cy9jb250cmFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQSw0REFBNEQsMkJBQTJCOztBQUV2RjtBQUN3RTtBQU85QztBQUNvQjtBQUNTO0FBQ2hCO0FBQ0o7QUFDUztBQUNzQjs7QUFFbEU7QUFDOEM7QUFDSTtBQUNBO0FBQ2I7QUFDckM7QUFDQSxVQUFVLHFCQUFxQixFQUFFLGlOQUFHO0FBQ3BDO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQVE7QUFDN0Isc0JBQXNCLHNEQUFNLG9CQUFvQix3REFBUTtBQUN4RCwrQkFBK0IsNERBQWM7QUFDN0M7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBLElBQUksK0NBQVE7QUFDWjtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0EsSUFBSSwrQ0FBUTtBQUNaO0FBQ0E7QUFDQSxJQUFJLCtDQUFRO0FBQ1o7QUFDQSxJQUFJLDhDQUFPO0FBQ1g7QUFDQSxJQUFJLCtDQUFRO0FBQ1o7QUFDQSxJQUFJLCtDQUFRO0FBQ1o7QUFDQSxJQUFJLCtDQUFRO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4Q0FBTztBQUNYO0FBQ0EsSUFBSSwrQ0FBUTtBQUNaO0FBQ0EsSUFBSSw4Q0FBTztBQUNYO0FBQ0EsU0FBUyxzREFBTTtBQUNmLENBQUM7O0FBRUQ7QUFDK0M7QUFDSTtBQUNuRDtBQUNBO0FBQ0Esa0NBQWtDLDBCQUEwQjtBQUM1RDtBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGNBQWMsc0RBQU87QUFDckI7QUFDQTtBQUNBLGtCQUFrQiwwQ0FBMEM7QUFD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QSxnQkFBZ0Isc0RBQVMsQ0FBQyxzREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUNBQWlDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCLGVBQWUsb0VBQXNCO0FBQ3JDLGNBQWMscURBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBUztBQUN6QixRQUFRLHNEQUFTO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQVc7QUFDM0IsS0FBSztBQUNMO0FBQ0EsVUFBVSwwREFBMEQsaURBQUU7QUFDdEU7QUFDQTtBQUNBLDREQUE0RCx5REFBVTtBQUN0RSxxQ0FBcUMseURBQVUsSUFBSSx5REFBVTtBQUM3RDtBQUNBO0FBT0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3lvdXN1a2UvTXlQcm9qZWN0L215LW5leHVzLWFwcC9ub2RlX21vZHVsZXMvLnBucG0vQGZ1ZWwtdHMrY29udHJhY3RAMC4xMDEuMV92aXRlc3RAMy4yLjRfQHR5cGVzK2RlYnVnQDQuMS4xMl9AdHlwZXMrbm9kZUAyNC43LjJfaml0aUAyLjYuXzBiYmQwMjg0ODVjZTdhNTdjYjFlNTM0MGIxN2ZmNTAwL25vZGVfbW9kdWxlcy9AZnVlbC10cy9jb250cmFjdC9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4vLyBzcmMvY29udHJhY3QtZmFjdG9yeS50c1xuaW1wb3J0IHsgSW50ZXJmYWNlLCBXT1JEX1NJWkUgYXMgV09SRF9TSVpFMiB9IGZyb20gXCJAZnVlbC10cy9hYmktY29kZXJcIjtcbmltcG9ydCB7XG4gIENyZWF0ZVRyYW5zYWN0aW9uUmVxdWVzdCxcbiAgQmxvYlRyYW5zYWN0aW9uUmVxdWVzdCxcbiAgVHJhbnNhY3Rpb25TdGF0dXMsXG4gIGNhbGN1bGF0ZUdhc0ZlZSxcbiAgc2V0QW5kVmFsaWRhdGVHYXNBbmRGZWVGb3JBc3NlbWJsZWRUeFxufSBmcm9tIFwiQGZ1ZWwtdHMvYWNjb3VudFwiO1xuaW1wb3J0IHsgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiQGZ1ZWwtdHMvY3J5cHRvXCI7XG5pbXBvcnQgeyBFcnJvckNvZGUsIEZ1ZWxFcnJvciB9IGZyb20gXCJAZnVlbC10cy9lcnJvcnNcIjtcbmltcG9ydCB7IGhhc2ggfSBmcm9tIFwiQGZ1ZWwtdHMvaGFzaGVyXCI7XG5pbXBvcnQgeyBibiB9IGZyb20gXCJAZnVlbC10cy9tYXRoXCI7XG5pbXBvcnQgeyBDb250cmFjdCB9IGZyb20gXCJAZnVlbC10cy9wcm9ncmFtXCI7XG5pbXBvcnQgeyBhcnJheWlmeSBhcyBhcnJheWlmeTMsIGlzRGVmaW5lZCB9IGZyb20gXCJAZnVlbC10cy91dGlsc1wiO1xuXG4vLyBzcmMvbG9hZGVyL2xvYWRlci1zY3JpcHQudHNcbmltcG9ydCB7IEJZVEVTXzMyIH0gZnJvbSBcIkBmdWVsLXRzL2FiaS1jb2RlclwiO1xuaW1wb3J0IHsgSW5zdHJ1Y3Rpb25TZXQgfSBmcm9tIFwiQGZ1ZWwtdHMvcHJvZ3JhbVwiO1xuaW1wb3J0IHsgYXJyYXlpZnksIGNvbmNhdCB9IGZyb20gXCJAZnVlbC10cy91dGlsc1wiO1xuaW1wb3J0ICogYXMgYXNtIGZyb20gXCJAZnVlbHMvdm0tYXNtXCI7XG52YXIgZ2V0TG9hZGVySW5zdHJ1Y3Rpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYmxvYklkcykgPT4ge1xuICBjb25zdCB7IFJlZ0lkLCBJbnN0cnVjdGlvbiB9ID0gYXNtO1xuICBjb25zdCBudW1iZXJPZkluc3RydWN0aW9ucyA9IDEyO1xuICBjb25zdCBudW1iZXJPZkJsb2JzID0gYmxvYklkcy5sZW5ndGg7XG4gIGNvbnN0IGJsb2JJZFNpemUgPSBCWVRFU18zMjtcbiAgY29uc3QgYmxvYklkQnl0ZXMgPSBjb25jYXQoYmxvYklkcy5tYXAoKGIpID0+IGFycmF5aWZ5KGIpKSk7XG4gIGNvbnN0IGluc3RydWN0aW9uQnl0ZXMgPSBuZXcgSW5zdHJ1Y3Rpb25TZXQoXG4gICAgLy8gMS4gbG9hZCB0aGUgYmxvYiBjb250ZW50cyBpbnRvIG1lbW9yeVxuICAgIC8vIGZpbmQgdGhlIHN0YXJ0IG9mIHRoZSBoYXJkY29kZWQgYmxvYiBpZHMsIHdoaWNoIGFyZSBsb2NhdGVkIGFmdGVyIHRoZSBjb2RlIGVuZHNcbiAgICBhc20ubW92ZV8oMTYsIFJlZ0lkLnBjKCkudG9fdTgoKSksXG4gICAgLy8gMHgxMCB0byBob2xkIHRoZSBhZGRyZXNzIG9mIHRoZSBjdXJyZW50IGJsb2IgaWRcbiAgICBhc20uYWRkaSgxNiwgMTYsIG51bWJlck9mSW5zdHJ1Y3Rpb25zICogSW5zdHJ1Y3Rpb24uc2l6ZSgpKSxcbiAgICAvLyBUaGUgY29udHJhY3QgaXMgZ29pbmcgdG8gYmUgbG9hZGVkIGZyb20gdGhlIGN1cnJlbnQgdmFsdWUgb2YgU1Agb253YXJkcywgc2F2ZVxuICAgIC8vIHRoZSBsb2NhdGlvbiBpbnRvIDB4MTYgc28gd2UgY2FuIGp1bXAgaW50byBpdCBsYXRlciBvblxuICAgIGFzbS5tb3ZlXygyMiwgUmVnSWQuc3AoKS50b191OCgpKSxcbiAgICAvLyBsb29wIGNvdW50ZXJcbiAgICBhc20ubW92aSgxOSwgbnVtYmVyT2ZCbG9icyksXG4gICAgLy8gTE9PUCBzdGFydHMgaGVyZVxuICAgIC8vIDB4MTEgdG8gaG9sZCB0aGUgc2l6ZSBvZiB0aGUgY3VycmVudCBibG9iXG4gICAgYXNtLmJzaXooMTcsIDE2KSxcbiAgICAvLyBwdXNoIHRoZSBibG9iIGNvbnRlbnRzIG9udG8gdGhlIHN0YWNrXG4gICAgYXNtLmxkYygxNiwgMCwgMTcsIDEpLFxuICAgIC8vIG1vdmUgb24gdG8gdGhlIG5leHQgYmxvYlxuICAgIGFzbS5hZGRpKDE2LCAxNiwgYmxvYklkU2l6ZSksXG4gICAgLy8gZGVjcmVtZW50IHRoZSBsb29wIGNvdW50ZXJcbiAgICBhc20uc3ViaSgxOSwgMTksIDEpLFxuICAgIC8vIEp1bXAgYmFja3dhcmRzICgzKzEpIGluc3RydWN0aW9ucyBpZiB0aGUgY291bnRlciBoYXMgbm90IHJlYWNoZWQgMFxuICAgIGFzbS5qbnpiKDE5LCBSZWdJZC56ZXJvKCkudG9fdTgoKSwgMyksXG4gICAgLy8gSnVtcCBpbnRvIHRoZSBtZW1vcnkgd2hlcmUgdGhlIGNvbnRyYWN0IGlzIGxvYWRlZFxuICAgIC8vIHdoYXQgZm9sbG93cyBpcyBjYWxsZWQgX2ptcF9tZW0gYnkgdGhlIHN3YXkgY29tcGlsZXJcbiAgICAvLyBzdWJ0cmFjdCB0aGUgYWRkcmVzcyBjb250YWluZWQgaW4gSVMgYmVjYXVzZSBqbXAgd2lsbCBhZGQgaXQgYmFja1xuICAgIGFzbS5zdWIoMjIsIDIyLCBSZWdJZC5pcygpLnRvX3U4KCkpLFxuICAgIC8vIGptcCB3aWxsIG11bHRpcGx5IGJ5IDQgc28gd2UgbmVlZCB0byBkaXZpZGUgdG8gY2FuY2VsIHRoYXQgb3V0XG4gICAgYXNtLmRpdmkoMjIsIDIyLCA0KSxcbiAgICAvLyBqdW1wIHRvIHRoZSBzdGFydCBvZiB0aGUgY29udHJhY3Qgd2UgbG9hZGVkXG4gICAgYXNtLmptcCgyMilcbiAgKS50b0J5dGVzKCk7XG4gIHJldHVybiBjb25jYXQoW2luc3RydWN0aW9uQnl0ZXMsIGJsb2JJZEJ5dGVzXSk7XG59LCBcImdldExvYWRlckluc3RydWN0aW9uc1wiKTtcblxuLy8gc3JjL2xvYWRlci91dGlscy50c1xuaW1wb3J0IHsgV09SRF9TSVpFIH0gZnJvbSBcIkBmdWVsLXRzL2FiaS1jb2RlclwiO1xuaW1wb3J0IHsgY29uY2F0IGFzIGNvbmNhdDIgfSBmcm9tIFwiQGZ1ZWwtdHMvdXRpbHNcIjtcbnZhciBnZXRDb250cmFjdENodW5rcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGJ5dGVjb2RlLCBjaHVua1NpemUpID0+IHtcbiAgY29uc3QgY2h1bmtzID0gW107XG4gIGZvciAobGV0IG9mZnNldCA9IDAsIGluZGV4ID0gMDsgb2Zmc2V0IDwgYnl0ZWNvZGUubGVuZ3RoOyBvZmZzZXQgKz0gY2h1bmtTaXplLCBpbmRleCsrKSB7XG4gICAgbGV0IGNodW5rID0gYnl0ZWNvZGUuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBjaHVua1NpemUpO1xuICAgIGxldCBsZW5ndGggPSBjaHVuay5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCAlIFdPUkRfU0laRSAhPT0gMCkge1xuICAgICAgY2h1bmsgPSBjb25jYXQyKFtjaHVuaywgbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplIC0gY2h1bmsubGVuZ3RoKV0pO1xuICAgICAgbGVuZ3RoID0gY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgICBjaHVua3MucHVzaCh7IGlkOiBpbmRleCwgc2l6ZTogbGVuZ3RoLCBieXRlY29kZTogY2h1bmsgfSk7XG4gIH1cbiAgcmV0dXJuIGNodW5rcztcbn0sIFwiZ2V0Q29udHJhY3RDaHVua3NcIik7XG5cbi8vIHNyYy91dGlsLnRzXG5pbXBvcnQgeyBzaGEyNTYgfSBmcm9tIFwiQGZ1ZWwtdHMvaGFzaGVyXCI7XG5pbXBvcnQgeyBjYWxjUm9vdCwgU3BhcnNlTWVya2xlVHJlZSB9IGZyb20gXCJAZnVlbC10cy9tZXJrbGVcIjtcbmltcG9ydCB7IGNodW5rQW5kUGFkQnl0ZXMsIGhleGxpZnksIGNvbmNhdCBhcyBjb25jYXQzLCBhcnJheWlmeSBhcyBhcnJheWlmeTIgfSBmcm9tIFwiQGZ1ZWwtdHMvdXRpbHNcIjtcbnZhciBnZXRDb250cmFjdFJvb3QgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChieXRlY29kZSkgPT4ge1xuICBjb25zdCBjaHVua1NpemUgPSAxNiAqIDEwMjQ7XG4gIGNvbnN0IGJ5dGVzID0gYXJyYXlpZnkyKGJ5dGVjb2RlKTtcbiAgY29uc3QgY2h1bmtzID0gY2h1bmtBbmRQYWRCeXRlcyhieXRlcywgY2h1bmtTaXplKTtcbiAgcmV0dXJuIGNhbGNSb290KGNodW5rcy5tYXAoKGMpID0+IGhleGxpZnkoYykpKTtcbn0sIFwiZ2V0Q29udHJhY3RSb290XCIpO1xudmFyIGdldENvbnRyYWN0U3RvcmFnZVJvb3QgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdG9yYWdlU2xvdHMpID0+IHtcbiAgY29uc3QgdHJlZSA9IG5ldyBTcGFyc2VNZXJrbGVUcmVlKCk7XG4gIHN0b3JhZ2VTbG90cy5mb3JFYWNoKCh7IGtleSwgdmFsdWUgfSkgPT4gdHJlZS51cGRhdGUoc2hhMjU2KGtleSksIHZhbHVlKSk7XG4gIHJldHVybiB0cmVlLnJvb3Q7XG59LCBcImdldENvbnRyYWN0U3RvcmFnZVJvb3RcIik7XG52YXIgZ2V0Q29udHJhY3RJZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGJ5dGVjb2RlLCBzYWx0LCBzdGF0ZVJvb3QpID0+IHtcbiAgY29uc3Qgcm9vdCA9IGdldENvbnRyYWN0Um9vdChhcnJheWlmeTIoYnl0ZWNvZGUpKTtcbiAgY29uc3QgY29udHJhY3RJZCA9IHNoYTI1Nihjb25jYXQzKFtcIjB4NDY1NTQ1NENcIiwgc2FsdCwgcm9vdCwgc3RhdGVSb290XSkpO1xuICByZXR1cm4gY29udHJhY3RJZDtcbn0sIFwiZ2V0Q29udHJhY3RJZFwiKTtcbnZhciBoZXhsaWZ5V2l0aFByZWZpeCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHZhbHVlKSA9PiBoZXhsaWZ5KHZhbHVlLnN0YXJ0c1dpdGgoXCIweFwiKSA/IHZhbHVlIDogYDB4JHt2YWx1ZX1gKSwgXCJoZXhsaWZ5V2l0aFByZWZpeFwiKTtcblxuLy8gc3JjL2NvbnRyYWN0LWZhY3RvcnkudHNcbnZhciBDSFVOS19TSVpFX01VTFRJUExJRVIgPSAwLjk1O1xudmFyIENvbnRyYWN0RmFjdG9yeSA9IGNsYXNzIF9Db250cmFjdEZhY3Rvcnkge1xuICBzdGF0aWMge1xuICAgIF9fbmFtZSh0aGlzLCBcIkNvbnRyYWN0RmFjdG9yeVwiKTtcbiAgfVxuICBieXRlY29kZTtcbiAgaW50ZXJmYWNlO1xuICBwcm92aWRlcjtcbiAgYWNjb3VudDtcbiAgc3RvcmFnZVNsb3RzO1xuICAvKipcbiAgICogQ3JlYXRlIGEgQ29udHJhY3RGYWN0b3J5IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZWNvZGUgLSBUaGUgYnl0ZWNvZGUgb2YgdGhlIGNvbnRyYWN0LlxuICAgKiBAcGFyYW0gYWJpIC0gVGhlIGNvbnRyYWN0J3MgQUJJIChBcHBsaWNhdGlvbiBCaW5hcnkgSW50ZXJmYWNlKS5cbiAgICogQHBhcmFtIGFjY291bnRPclByb3ZpZGVyIC0gQW4gYWNjb3VudCBvciBwcm92aWRlciB0byBiZSBhc3NvY2lhdGVkIHdpdGggdGhlIGZhY3RvcnkuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihieXRlY29kZSwgYWJpLCBhY2NvdW50T3JQcm92aWRlciA9IG51bGwsIHN0b3JhZ2VTbG90cyA9IFtdKSB7XG4gICAgdGhpcy5ieXRlY29kZSA9IGFycmF5aWZ5MyhieXRlY29kZSk7XG4gICAgaWYgKGFiaSBpbnN0YW5jZW9mIEludGVyZmFjZSkge1xuICAgICAgdGhpcy5pbnRlcmZhY2UgPSBhYmk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW50ZXJmYWNlID0gbmV3IEludGVyZmFjZShhYmkpO1xuICAgIH1cbiAgICBpZiAoYWNjb3VudE9yUHJvdmlkZXIgJiYgXCJwcm92aWRlclwiIGluIGFjY291bnRPclByb3ZpZGVyKSB7XG4gICAgICB0aGlzLnByb3ZpZGVyID0gYWNjb3VudE9yUHJvdmlkZXIucHJvdmlkZXI7XG4gICAgICB0aGlzLmFjY291bnQgPSBhY2NvdW50T3JQcm92aWRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wcm92aWRlciA9IGFjY291bnRPclByb3ZpZGVyO1xuICAgICAgdGhpcy5hY2NvdW50ID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdG9yYWdlU2xvdHMgPSBzdG9yYWdlU2xvdHM7XG4gIH1cbiAgLyoqXG4gICAqIENvbm5lY3QgdGhlIGZhY3RvcnkgdG8gYSBwcm92aWRlci5cbiAgICpcbiAgICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmFjdG9yeS5cbiAgICogQHJldHVybnMgQSBuZXcgQ29udHJhY3RGYWN0b3J5IGluc3RhbmNlLlxuICAgKi9cbiAgY29ubmVjdChwcm92aWRlcikge1xuICAgIHJldHVybiBuZXcgX0NvbnRyYWN0RmFjdG9yeSh0aGlzLmJ5dGVjb2RlLCB0aGlzLmludGVyZmFjZSwgcHJvdmlkZXIpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0cmFuc2FjdGlvbiByZXF1ZXN0IHRvIGRlcGxveSBhIGNvbnRyYWN0IHdpdGggdGhlIHNwZWNpZmllZCBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gZGVwbG95T3B0aW9ucyAtIE9wdGlvbnMgZm9yIGRlcGxveWluZyB0aGUgY29udHJhY3QuXG4gICAqIEByZXR1cm5zIFRoZSBDcmVhdGVUcmFuc2FjdGlvblJlcXVlc3Qgb2JqZWN0IGZvciBkZXBsb3lpbmcgdGhlIGNvbnRyYWN0LlxuICAgKi9cbiAgY3JlYXRlVHJhbnNhY3Rpb25SZXF1ZXN0KGRlcGxveU9wdGlvbnMpIHtcbiAgICBjb25zdCBzdG9yYWdlU2xvdHMgPSAoZGVwbG95T3B0aW9ucz8uc3RvcmFnZVNsb3RzID8/IFtdKS5jb25jYXQodGhpcy5zdG9yYWdlU2xvdHMpLm1hcCgoeyBrZXksIHZhbHVlIH0pID0+ICh7XG4gICAgICBrZXk6IGhleGxpZnlXaXRoUHJlZml4KGtleSksXG4gICAgICB2YWx1ZTogaGV4bGlmeVdpdGhQcmVmaXgodmFsdWUpXG4gICAgfSkpLmZpbHRlcigoZWwsIGluZGV4LCBzZWxmKSA9PiBzZWxmLmZpbmRJbmRleCgocykgPT4gcy5rZXkgPT09IGVsLmtleSkgPT09IGluZGV4KS5zb3J0KCh7IGtleToga2V5QSB9LCB7IGtleToga2V5QiB9KSA9PiBrZXlBLmxvY2FsZUNvbXBhcmUoa2V5QikpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzYWx0OiByYW5kb21CeXRlcygzMiksXG4gICAgICAuLi5kZXBsb3lPcHRpb25zID8/IHt9LFxuICAgICAgc3RvcmFnZVNsb3RzXG4gICAgfTtcbiAgICBpZiAoIXRoaXMucHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoXG4gICAgICAgIEVycm9yQ29kZS5NSVNTSU5HX1BST1ZJREVSLFxuICAgICAgICBcIkNhbm5vdCBjcmVhdGUgdHJhbnNhY3Rpb24gcmVxdWVzdCB3aXRob3V0IHByb3ZpZGVyXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGJ5dGVjb2RlID0gZGVwbG95T3B0aW9ucz8uYnl0ZWNvZGUgfHwgdGhpcy5ieXRlY29kZTtcbiAgICBjb25zdCBzdGF0ZVJvb3QgPSBvcHRpb25zLnN0YXRlUm9vdCB8fCBnZXRDb250cmFjdFN0b3JhZ2VSb290KG9wdGlvbnMuc3RvcmFnZVNsb3RzKTtcbiAgICBjb25zdCBjb250cmFjdElkID0gZ2V0Q29udHJhY3RJZChieXRlY29kZSwgb3B0aW9ucy5zYWx0LCBzdGF0ZVJvb3QpO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVxdWVzdCA9IG5ldyBDcmVhdGVUcmFuc2FjdGlvblJlcXVlc3Qoe1xuICAgICAgYnl0ZWNvZGVXaXRuZXNzSW5kZXg6IDAsXG4gICAgICB3aXRuZXNzZXM6IFtieXRlY29kZV0sXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgdHJhbnNhY3Rpb25SZXF1ZXN0LmFkZENvbnRyYWN0Q3JlYXRlZE91dHB1dChjb250cmFjdElkLCBzdGF0ZVJvb3QpO1xuICAgIHJldHVybiB7XG4gICAgICBjb250cmFjdElkLFxuICAgICAgdHJhbnNhY3Rpb25SZXF1ZXN0XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogVGFrZXMgYSB0cmFuc2FjdGlvbiByZXF1ZXN0LCBlc3RpbWF0ZXMgaXQgYW5kIGZ1bmRzIGl0LlxuICAgKlxuICAgKiBAcGFyYW0gcmVxdWVzdCAtIHRoZSByZXF1ZXN0IHRvIGZ1bmQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gb3B0aW9ucyBmb3IgZnVuZGluZyB0aGUgcmVxdWVzdC5cbiAgICogQHJldHVybnMgYSBmdW5kZWQgdHJhbnNhY3Rpb24gcmVxdWVzdC5cbiAgICovXG4gIGFzeW5jIGZ1bmRUcmFuc2FjdGlvblJlcXVlc3QocmVxdWVzdCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYWNjb3VudCA9IHRoaXMuZ2V0QWNjb3VudCgpO1xuICAgIGNvbnN0IHsgbWF4RmVlOiBzZXRNYXhGZWUgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdHhDb3N0ID0gYXdhaXQgYWNjb3VudC5nZXRUcmFuc2FjdGlvbkNvc3QocmVxdWVzdCk7XG4gICAgaWYgKGlzRGVmaW5lZChzZXRNYXhGZWUpKSB7XG4gICAgICBpZiAodHhDb3N0Lm1heEZlZS5ndChzZXRNYXhGZWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoXG4gICAgICAgICAgRXJyb3JDb2RlLk1BWF9GRUVfVE9PX0xPVyxcbiAgICAgICAgICBgTWF4IGZlZSAnJHtvcHRpb25zLm1heEZlZX0nIGlzIGxvd2VyIHRoYW4gdGhlIHJlcXVpcmVkOiAnJHt0eENvc3QubWF4RmVlfScuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0Lm1heEZlZSA9IHR4Q29zdC5tYXhGZWU7XG4gICAgfVxuICAgIGF3YWl0IGFjY291bnQuZnVuZChyZXF1ZXN0LCB0eENvc3QpO1xuICAgIHJldHVybiByZXF1ZXN0O1xuICB9XG4gIGFzeW5jIGFzc2VtYmxlVHgocmVxdWVzdCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYWNjb3VudCA9IHRoaXMuZ2V0QWNjb3VudCgpO1xuICAgIGNvbnN0IHsgbWF4RmVlOiBzZXRNYXhGZWUgfSA9IG9wdGlvbnM7XG4gICAgcmVxdWVzdC5tYXhGZWUgPSBibigwKTtcbiAgICBjb25zdCB7IGdhc1ByaWNlLCBhc3NlbWJsZWRSZXF1ZXN0IH0gPSBhd2FpdCBhY2NvdW50LnByb3ZpZGVyLmFzc2VtYmxlVHgoe1xuICAgICAgcmVxdWVzdCxcbiAgICAgIGZlZVBheWVyQWNjb3VudDogYWNjb3VudCxcbiAgICAgIGFjY291bnRDb2luUXVhbnRpdGllczogW11cbiAgICB9KTtcbiAgICByZXF1ZXN0ID0gYXdhaXQgc2V0QW5kVmFsaWRhdGVHYXNBbmRGZWVGb3JBc3NlbWJsZWRUeCh7XG4gICAgICBnYXNQcmljZSxcbiAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxuICAgICAgdHJhbnNhY3Rpb25SZXF1ZXN0OiBhc3NlbWJsZWRSZXF1ZXN0LFxuICAgICAgc2V0TWF4RmVlXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcXVlc3Q7XG4gIH1cbiAgLyoqXG4gICAqIERlcGxveSBhIGNvbnRyYWN0IG9mIGFueSBsZW5ndGggd2l0aCB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSBkZXBsb3lPcHRpb25zIC0gT3B0aW9ucyBmb3IgZGVwbG95aW5nIHRoZSBjb250cmFjdC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGRlcGxveWVkIGNvbnRyYWN0IGluc3RhbmNlLlxuICAgKi9cbiAgYXN5bmMgZGVwbG95KGRlcGxveU9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGFjY291bnQgPSB0aGlzLmdldEFjY291bnQoKTtcbiAgICBjb25zdCB7IGNvbnNlbnN1c1BhcmFtZXRlcnMgfSA9IGF3YWl0IGFjY291bnQucHJvdmlkZXIuZ2V0Q2hhaW4oKTtcbiAgICBjb25zdCBtYXhDb250cmFjdFNpemUgPSBjb25zZW5zdXNQYXJhbWV0ZXJzLmNvbnRyYWN0UGFyYW1ldGVycy5jb250cmFjdE1heFNpemUudG9OdW1iZXIoKTtcbiAgICByZXR1cm4gdGhpcy5ieXRlY29kZS5sZW5ndGggPiBtYXhDb250cmFjdFNpemUgPyB0aGlzLmRlcGxveUFzQmxvYlR4KGRlcGxveU9wdGlvbnMpIDogdGhpcy5kZXBsb3lBc0NyZWF0ZVR4KGRlcGxveU9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBEZXBsb3kgYSBjb250cmFjdCB3aXRoIHRoZSBzcGVjaWZpZWQgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIGRlcGxveU9wdGlvbnMgLSBPcHRpb25zIGZvciBkZXBsb3lpbmcgdGhlIGNvbnRyYWN0LlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgZGVwbG95ZWQgY29udHJhY3QgaW5zdGFuY2UuXG4gICAqL1xuICBhc3luYyBkZXBsb3lBc0NyZWF0ZVR4KGRlcGxveU9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGFjY291bnQgPSB0aGlzLmdldEFjY291bnQoKTtcbiAgICBjb25zdCB7IGNvbnNlbnN1c1BhcmFtZXRlcnMgfSA9IGF3YWl0IGFjY291bnQucHJvdmlkZXIuZ2V0Q2hhaW4oKTtcbiAgICBjb25zdCBtYXhDb250cmFjdFNpemUgPSBjb25zZW5zdXNQYXJhbWV0ZXJzLmNvbnRyYWN0UGFyYW1ldGVycy5jb250cmFjdE1heFNpemUudG9OdW1iZXIoKTtcbiAgICBpZiAodGhpcy5ieXRlY29kZS5sZW5ndGggPiBtYXhDb250cmFjdFNpemUpIHtcbiAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoXG4gICAgICAgIEVycm9yQ29kZS5DT05UUkFDVF9TSVpFX0VYQ0VFRFNfTElNSVQsXG4gICAgICAgIFwiQ29udHJhY3QgYnl0ZWNvZGUgaXMgdG9vIGxhcmdlLiBQbGVhc2UgdXNlIGBkZXBsb3lBc0Jsb2JUeGAgaW5zdGVhZC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgeyBjb250cmFjdElkLCB0cmFuc2FjdGlvblJlcXVlc3QgfSA9IGF3YWl0IHRoaXMucHJlcGFyZURlcGxveShkZXBsb3lPcHRpb25zKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvblJlc3BvbnNlID0gYXdhaXQgYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25SZXF1ZXN0KTtcbiAgICBjb25zdCB3YWl0Rm9yUmVzdWx0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvblJlc3VsdCA9IGF3YWl0IHRyYW5zYWN0aW9uUmVzcG9uc2Uud2FpdEZvclJlc3VsdCgpO1xuICAgICAgY29uc3QgY29udHJhY3QgPSBuZXcgQ29udHJhY3QoY29udHJhY3RJZCwgdGhpcy5pbnRlcmZhY2UsIGFjY291bnQpO1xuICAgICAgcmV0dXJuIHsgY29udHJhY3QsIHRyYW5zYWN0aW9uUmVzdWx0IH07XG4gICAgfSwgXCJ3YWl0Rm9yUmVzdWx0XCIpO1xuICAgIGNvbnN0IHdhaXRGb3JQcmVDb25maXJtYXRpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVzdWx0ID0gYXdhaXQgdHJhbnNhY3Rpb25SZXNwb25zZS53YWl0Rm9yUHJlQ29uZmlybWF0aW9uKCk7XG4gICAgICBjb25zdCBjb250cmFjdCA9IG5ldyBDb250cmFjdChjb250cmFjdElkLCB0aGlzLmludGVyZmFjZSwgYWNjb3VudCk7XG4gICAgICByZXR1cm4geyBjb250cmFjdCwgdHJhbnNhY3Rpb25SZXN1bHQgfTtcbiAgICB9LCBcIndhaXRGb3JQcmVDb25maXJtYXRpb25cIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyYWN0SWQsXG4gICAgICB3YWl0Rm9yUmVzdWx0LFxuICAgICAgd2FpdEZvclByZUNvbmZpcm1hdGlvbixcbiAgICAgIHdhaXRGb3JUcmFuc2FjdGlvbklkOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IFByb21pc2UucmVzb2x2ZSh0cmFuc2FjdGlvblJlc3BvbnNlLmlkKSwgXCJ3YWl0Rm9yVHJhbnNhY3Rpb25JZFwiKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENodW5rcyBhbmQgZGVwbG95cyBhIGNvbnRyYWN0IHZpYSBhIGxvYWRlciBjb250cmFjdC4gU3VpdGFibGUgZm9yIGRlcGxveWluZyBjb250cmFjdHMgbGFyZ2VyIHRoYW4gdGhlIG1heCBjb250cmFjdCBzaXplLlxuICAgKlxuICAgKiBAcGFyYW0gZGVwbG95T3B0aW9ucyAtIE9wdGlvbnMgZm9yIGRlcGxveWluZyB0aGUgY29udHJhY3QuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBkZXBsb3llZCBjb250cmFjdCBpbnN0YW5jZS5cbiAgICovXG4gIGFzeW5jIGRlcGxveUFzQmxvYlR4KGRlcGxveU9wdGlvbnMgPSB7XG4gICAgY2h1bmtTaXplTXVsdGlwbGllcjogQ0hVTktfU0laRV9NVUxUSVBMSUVSXG4gIH0pIHtcbiAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KCk7XG4gICAgY29uc3QgeyBjb25maWd1cmFibGVDb25zdGFudHMsIGNodW5rU2l6ZU11bHRpcGxpZXIgfSA9IGRlcGxveU9wdGlvbnM7XG4gICAgaWYgKGNvbmZpZ3VyYWJsZUNvbnN0YW50cykge1xuICAgICAgdGhpcy5zZXRDb25maWd1cmFibGVDb25zdGFudHMoY29uZmlndXJhYmxlQ29uc3RhbnRzKTtcbiAgICB9XG4gICAgY29uc3QgY2h1bmtTaXplID0gYXdhaXQgdGhpcy5nZXRNYXhDaHVua1NpemUoZGVwbG95T3B0aW9ucywgY2h1bmtTaXplTXVsdGlwbGllcik7XG4gICAgY29uc3QgY2h1bmtzID0gZ2V0Q29udHJhY3RDaHVua3MoYXJyYXlpZnkzKHRoaXMuYnl0ZWNvZGUpLCBjaHVua1NpemUpLm1hcCgoYykgPT4ge1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb25SZXF1ZXN0ID0gdGhpcy5ibG9iVHJhbnNhY3Rpb25SZXF1ZXN0KHtcbiAgICAgICAgLi4uZGVwbG95T3B0aW9ucyxcbiAgICAgICAgYnl0ZWNvZGU6IGMuYnl0ZWNvZGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYyxcbiAgICAgICAgdHJhbnNhY3Rpb25SZXF1ZXN0LFxuICAgICAgICBibG9iSWQ6IHRyYW5zYWN0aW9uUmVxdWVzdC5ibG9iSWRcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgYmxvYklkcyA9IGNodW5rcy5tYXAoKHsgYmxvYklkIH0pID0+IGJsb2JJZCk7XG4gICAgY29uc3QgbG9hZGVyQnl0ZWNvZGUgPSBnZXRMb2FkZXJJbnN0cnVjdGlvbnMoYmxvYklkcyk7XG4gICAgY29uc3QgeyBjb250cmFjdElkLCB0cmFuc2FjdGlvblJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3QgfSA9IHRoaXMuY3JlYXRlVHJhbnNhY3Rpb25SZXF1ZXN0KHtcbiAgICAgIGJ5dGVjb2RlOiBsb2FkZXJCeXRlY29kZSxcbiAgICAgIC4uLmRlcGxveU9wdGlvbnNcbiAgICB9KTtcbiAgICBjb25zdCB1bmlxdWVCbG9iSWRzID0gWy4uLm5ldyBTZXQoYmxvYklkcyldO1xuICAgIGNvbnN0IHVwbG9hZGVkQmxvYklkcyA9IGF3YWl0IGFjY291bnQucHJvdmlkZXIuZ2V0QmxvYnModW5pcXVlQmxvYklkcyk7XG4gICAgY29uc3QgYmxvYklkc1RvVXBsb2FkID0gdW5pcXVlQmxvYklkcy5maWx0ZXIoKGlkKSA9PiAhdXBsb2FkZWRCbG9iSWRzLmluY2x1ZGVzKGlkKSk7XG4gICAgbGV0IHRvdGFsQ29zdCA9IGJuKDApO1xuICAgIGNvbnN0IGNoYWluSW5mbyA9IGF3YWl0IGFjY291bnQucHJvdmlkZXIuZ2V0Q2hhaW4oKTtcbiAgICBjb25zdCBnYXNQcmljZSA9IGF3YWl0IGFjY291bnQucHJvdmlkZXIuZXN0aW1hdGVHYXNQcmljZSgxMCk7XG4gICAgY29uc3QgcHJpY2VGYWN0b3IgPSBjaGFpbkluZm8uY29uc2Vuc3VzUGFyYW1ldGVycy5mZWVQYXJhbWV0ZXJzLmdhc1ByaWNlRmFjdG9yO1xuICAgIGZvciAoY29uc3QgeyB0cmFuc2FjdGlvblJlcXVlc3QsIGJsb2JJZCB9IG9mIGNodW5rcykge1xuICAgICAgaWYgKGJsb2JJZHNUb1VwbG9hZC5pbmNsdWRlcyhibG9iSWQpKSB7XG4gICAgICAgIGNvbnN0IG1pbkdhcyA9IHRyYW5zYWN0aW9uUmVxdWVzdC5jYWxjdWxhdGVNaW5HYXMoY2hhaW5JbmZvKTtcbiAgICAgICAgY29uc3QgbWluRmVlID0gY2FsY3VsYXRlR2FzRmVlKHtcbiAgICAgICAgICBnYXNQcmljZSxcbiAgICAgICAgICBnYXM6IG1pbkdhcyxcbiAgICAgICAgICBwcmljZUZhY3RvcixcbiAgICAgICAgICB0aXA6IHRyYW5zYWN0aW9uUmVxdWVzdC50aXBcbiAgICAgICAgfSkuYWRkKDEpO1xuICAgICAgICB0b3RhbENvc3QgPSB0b3RhbENvc3QuYWRkKG1pbkZlZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjcmVhdGVNaW5HYXMgPSBjcmVhdGVSZXF1ZXN0LmNhbGN1bGF0ZU1pbkdhcyhjaGFpbkluZm8pO1xuICAgICAgY29uc3QgY3JlYXRlTWluRmVlID0gY2FsY3VsYXRlR2FzRmVlKHtcbiAgICAgICAgZ2FzUHJpY2UsXG4gICAgICAgIGdhczogY3JlYXRlTWluR2FzLFxuICAgICAgICBwcmljZUZhY3RvcixcbiAgICAgICAgdGlwOiBjcmVhdGVSZXF1ZXN0LnRpcFxuICAgICAgfSkuYWRkKDEpO1xuICAgICAgdG90YWxDb3N0ID0gdG90YWxDb3N0LmFkZChjcmVhdGVNaW5GZWUpO1xuICAgIH1cbiAgICBpZiAodG90YWxDb3N0Lmd0KGF3YWl0IGFjY291bnQuZ2V0QmFsYW5jZSgpKSkge1xuICAgICAgdGhyb3cgbmV3IEZ1ZWxFcnJvcihFcnJvckNvZGUuRlVORFNfVE9PX0xPVywgXCJJbnN1ZmZpY2llbnQgYmFsYW5jZSB0byBkZXBsb3kgY29udHJhY3QuXCIpO1xuICAgIH1cbiAgICBsZXQgdHhJZFJlc29sdmVyO1xuICAgIGNvbnN0IHR4SWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHR4SWRSZXNvbHZlciA9IHJlc29sdmU7XG4gICAgfSk7XG4gICAgY29uc3Qgd2FpdEZvclJlc3VsdCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBsb2FkZWRCbG9icyA9IFtdO1xuICAgICAgZm9yIChjb25zdCB7IGJsb2JJZCwgdHJhbnNhY3Rpb25SZXF1ZXN0IH0gb2YgY2h1bmtzKSB7XG4gICAgICAgIGlmICghdXBsb2FkZWRCbG9icy5pbmNsdWRlcyhibG9iSWQpICYmIGJsb2JJZHNUb1VwbG9hZC5pbmNsdWRlcyhibG9iSWQpKSB7XG4gICAgICAgICAgY29uc3QgZnVuZGVkQmxvYlJlcXVlc3QgPSBhd2FpdCB0aGlzLmFzc2VtYmxlVHgodHJhbnNhY3Rpb25SZXF1ZXN0LCBkZXBsb3lPcHRpb25zKTtcbiAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBibG9iVHggPSBhd2FpdCBhY2NvdW50LnNlbmRUcmFuc2FjdGlvbihmdW5kZWRCbG9iUmVxdWVzdCk7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBibG9iVHgud2FpdEZvclJlc3VsdCgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoYEJsb2JJZCBpcyBhbHJlYWR5IHRha2VuICR7YmxvYklkfWApID4gLTEpIHtcbiAgICAgICAgICAgICAgdXBsb2FkZWRCbG9icy5wdXNoKGJsb2JJZCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEZ1ZWxFcnJvcihFcnJvckNvZGUuVFJBTlNBQ1RJT05fRkFJTEVELCBcIkZhaWxlZCB0byBkZXBsb3kgY29udHJhY3QgY2h1bmtcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghcmVzdWx0LnN0YXR1cyB8fCByZXN1bHQuc3RhdHVzICE9PSBUcmFuc2FjdGlvblN0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRnVlbEVycm9yKEVycm9yQ29kZS5UUkFOU0FDVElPTl9GQUlMRUQsIFwiRmFpbGVkIHRvIGRlcGxveSBjb250cmFjdCBjaHVua1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZWRCbG9icy5wdXNoKGJsb2JJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuYXNzZW1ibGVUeChjcmVhdGVSZXF1ZXN0LCBkZXBsb3lPcHRpb25zKTtcbiAgICAgIHR4SWRSZXNvbHZlcihjcmVhdGVSZXF1ZXN0LmdldFRyYW5zYWN0aW9uSWQoYXdhaXQgYWNjb3VudC5wcm92aWRlci5nZXRDaGFpbklkKCkpKTtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVzcG9uc2UgPSBhd2FpdCBhY2NvdW50LnNlbmRUcmFuc2FjdGlvbihjcmVhdGVSZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVzdWx0ID0gYXdhaXQgdHJhbnNhY3Rpb25SZXNwb25zZS53YWl0Rm9yUmVzdWx0KCk7XG4gICAgICBjb25zdCBjb250cmFjdCA9IG5ldyBDb250cmFjdChjb250cmFjdElkLCB0aGlzLmludGVyZmFjZSwgYWNjb3VudCk7XG4gICAgICByZXR1cm4geyBjb250cmFjdCwgdHJhbnNhY3Rpb25SZXN1bHQgfTtcbiAgICB9LCBcIndhaXRGb3JSZXN1bHRcIik7XG4gICAgY29uc3Qgd2FpdEZvclRyYW5zYWN0aW9uSWQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHR4SWRQcm9taXNlLCBcIndhaXRGb3JUcmFuc2FjdGlvbklkXCIpO1xuICAgIHJldHVybiB7IHdhaXRGb3JSZXN1bHQsIGNvbnRyYWN0SWQsIHdhaXRGb3JUcmFuc2FjdGlvbklkIH07XG4gIH1cbiAgLyoqXG4gICAqIFNldCBjb25maWd1cmFibGUgY29uc3RhbnRzIG9mIHRoZSBjb250cmFjdCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0gY29uZmlndXJhYmxlQ29uc3RhbnRzIC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgY29uZmlndXJhYmxlIG5hbWVzIGFuZCB0aGVpciB2YWx1ZXMuXG4gICAqL1xuICBzZXRDb25maWd1cmFibGVDb25zdGFudHMoY29uZmlndXJhYmxlQ29uc3RhbnRzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhhc0NvbmZpZ3VyYWJsZSA9IE9iamVjdC5rZXlzKHRoaXMuaW50ZXJmYWNlLmNvbmZpZ3VyYWJsZXMpLmxlbmd0aDtcbiAgICAgIGlmICghaGFzQ29uZmlndXJhYmxlKSB7XG4gICAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoXG4gICAgICAgICAgRXJyb3JDb2RlLkNPTkZJR1VSQUJMRV9OT1RfRk9VTkQsXG4gICAgICAgICAgXCJDb250cmFjdCBkb2VzIG5vdCBoYXZlIGNvbmZpZ3VyYWJsZXMgdG8gYmUgc2V0XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5lbnRyaWVzKGNvbmZpZ3VyYWJsZUNvbnN0YW50cykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmZhY2UuY29uZmlndXJhYmxlc1trZXldKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZ1ZWxFcnJvcihcbiAgICAgICAgICAgIEVycm9yQ29kZS5DT05GSUdVUkFCTEVfTk9UX0ZPVU5ELFxuICAgICAgICAgICAgYENvbnRyYWN0IGRvZXMgbm90IGhhdmUgYSBjb25maWd1cmFibGUgbmFtZWQ6ICcke2tleX0nYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvZmZzZXQgfSA9IHRoaXMuaW50ZXJmYWNlLmNvbmZpZ3VyYWJsZXNba2V5XTtcbiAgICAgICAgY29uc3QgZW5jb2RlZCA9IHRoaXMuaW50ZXJmYWNlLmVuY29kZUNvbmZpZ3VyYWJsZShrZXksIHZhbHVlKTtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBhcnJheWlmeTModGhpcy5ieXRlY29kZSk7XG4gICAgICAgIGJ5dGVzLnNldChlbmNvZGVkLCBvZmZzZXQpO1xuICAgICAgICB0aGlzLmJ5dGVjb2RlID0gYnl0ZXM7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoXG4gICAgICAgIEVycm9yQ29kZS5JTlZBTElEX0NPTkZJR1VSQUJMRV9DT05TVEFOVFMsXG4gICAgICAgIGBFcnJvciBzZXR0aW5nIGNvbmZpZ3VyYWJsZSBjb25zdGFudHMgb24gY29udHJhY3Q6ICR7ZXJyLm1lc3NhZ2V9LmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGdldEFjY291bnQoKSB7XG4gICAgaWYgKCF0aGlzLmFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBGdWVsRXJyb3IoRXJyb3JDb2RlLkFDQ09VTlRfUkVRVUlSRUQsIFwiQWNjb3VudCBub3QgYXNzaWduZWQgdG8gY29udHJhY3QuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hY2NvdW50O1xuICB9XG4gIGFzeW5jIHByZXBhcmVEZXBsb3koZGVwbG95T3B0aW9ucykge1xuICAgIGNvbnN0IHsgY29uZmlndXJhYmxlQ29uc3RhbnRzIH0gPSBkZXBsb3lPcHRpb25zO1xuICAgIGlmIChjb25maWd1cmFibGVDb25zdGFudHMpIHtcbiAgICAgIHRoaXMuc2V0Q29uZmlndXJhYmxlQ29uc3RhbnRzKGNvbmZpZ3VyYWJsZUNvbnN0YW50cyk7XG4gICAgfVxuICAgIGNvbnN0IHsgY29udHJhY3RJZCwgdHJhbnNhY3Rpb25SZXF1ZXN0IH0gPSB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uUmVxdWVzdChkZXBsb3lPcHRpb25zKTtcbiAgICBhd2FpdCB0aGlzLmFzc2VtYmxlVHgodHJhbnNhY3Rpb25SZXF1ZXN0LCBkZXBsb3lPcHRpb25zKTtcbiAgICByZXR1cm4ge1xuICAgICAgY29udHJhY3RJZCxcbiAgICAgIHRyYW5zYWN0aW9uUmVxdWVzdFxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGJsb2IgdHJhbnNhY3Rpb24gcmVxdWVzdCwgdXNlZCBmb3IgZGVwbG95aW5nIGNvbnRyYWN0IGNodW5rcy5cbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBvcHRpb25zIGZvciBjcmVhdGluZyBhIGJsb2IgdHJhbnNhY3Rpb24gcmVxdWVzdC5cbiAgICogQHJldHVybnMgYSBwb3B1bGF0ZWQgQmxvYlRyYW5zYWN0aW9uUmVxdWVzdC5cbiAgICovXG4gIGJsb2JUcmFuc2FjdGlvblJlcXVlc3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHsgYnl0ZWNvZGUgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIG5ldyBCbG9iVHJhbnNhY3Rpb25SZXF1ZXN0KHtcbiAgICAgIGJsb2JJZDogaGFzaChieXRlY29kZSksXG4gICAgICB3aXRuZXNzSW5kZXg6IDAsXG4gICAgICB3aXRuZXNzZXM6IFtieXRlY29kZV0sXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgbWF4aW11bSBjaHVuayBzaXplIGZvciBkZXBsb3lpbmcgYSBjb250cmFjdCBieSBjaHVua3MuXG4gICAqL1xuICBhc3luYyBnZXRNYXhDaHVua1NpemUoZGVwbG95T3B0aW9ucywgY2h1bmtTaXplTXVsdGlwbGllciA9IENIVU5LX1NJWkVfTVVMVElQTElFUikge1xuICAgIGlmIChjaHVua1NpemVNdWx0aXBsaWVyIDwgMCB8fCBjaHVua1NpemVNdWx0aXBsaWVyID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEZ1ZWxFcnJvcihcbiAgICAgICAgRXJyb3JDb2RlLklOVkFMSURfQ0hVTktfU0laRV9NVUxUSVBMSUVSLFxuICAgICAgICBcIkNodW5rIHNpemUgbXVsdGlwbGllciBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMVwiXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KCk7XG4gICAgY29uc3QgeyBjb25zZW5zdXNQYXJhbWV0ZXJzIH0gPSBhd2FpdCBhY2NvdW50LnByb3ZpZGVyLmdldENoYWluKCk7XG4gICAgY29uc3QgY29udHJhY3RTaXplTGltaXQgPSBjb25zZW5zdXNQYXJhbWV0ZXJzLmNvbnRyYWN0UGFyYW1ldGVycy5jb250cmFjdE1heFNpemUudG9OdW1iZXIoKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvblNpemVMaW1pdCA9IGNvbnNlbnN1c1BhcmFtZXRlcnMudHhQYXJhbWV0ZXJzLm1heFNpemUudG9OdW1iZXIoKTtcbiAgICBjb25zdCBtYXhMaW1pdCA9IDY0ZTM7XG4gICAgY29uc3QgY2hhaW5MaW1pdCA9IHRyYW5zYWN0aW9uU2l6ZUxpbWl0IDwgY29udHJhY3RTaXplTGltaXQgPyB0cmFuc2FjdGlvblNpemVMaW1pdCA6IGNvbnRyYWN0U2l6ZUxpbWl0O1xuICAgIGNvbnN0IHNpemVMaW1pdCA9IGNoYWluTGltaXQgPCBtYXhMaW1pdCA/IGNoYWluTGltaXQgOiBtYXhMaW1pdDtcbiAgICBjb25zdCBibG9iVHggPSB0aGlzLmJsb2JUcmFuc2FjdGlvblJlcXVlc3Qoe1xuICAgICAgLi4uZGVwbG95T3B0aW9ucyxcbiAgICAgIGJ5dGVjb2RlOiByYW5kb21CeXRlcygzMilcbiAgICB9KS5hZGRSZXNvdXJjZXMoXG4gICAgICBhY2NvdW50LmdlbmVyYXRlRmFrZVJlc291cmNlcyhbXG4gICAgICAgIHsgYXNzZXRJZDogYXdhaXQgYWNjb3VudC5wcm92aWRlci5nZXRCYXNlQXNzZXRJZCgpLCBhbW91bnQ6IGJuKDEpIH1cbiAgICAgIF0pXG4gICAgKTtcbiAgICBjb25zdCBtYXhDaHVua1NpemUgPSAoc2l6ZUxpbWl0IC0gYmxvYlR4LmJ5dGVMZW5ndGgoKSAtIFdPUkRfU0laRTIpICogY2h1bmtTaXplTXVsdGlwbGllcjtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtYXhDaHVua1NpemUgLyBXT1JEX1NJWkUyKSAqIFdPUkRfU0laRTI7XG4gIH1cbn07XG5leHBvcnQge1xuICBDb250cmFjdEZhY3RvcnksXG4gIGdldENvbnRyYWN0SWQsXG4gIGdldENvbnRyYWN0Um9vdCxcbiAgZ2V0Q29udHJhY3RTdG9yYWdlUm9vdCxcbiAgaGV4bGlmeVdpdGhQcmVmaXhcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@fuel-ts+contract@0.101.1_vitest@3.2.4_@types+debug@4.1.12_@types+node@24.7.2_jiti@2.6._0bbd028485ce7a57cb1e5340b17ff500/node_modules/@fuel-ts/contract/dist/index.mjs\n");

/***/ })

};
;